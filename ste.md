# 训练自定义数据

📚本指南介绍如何使用 YOLOv5训练您自己的**自定义数据集**🚀. 2023 年 1 月 3 日更新。

将本指南与[YOLOv5 自定义训练笔记本](https://colab.research.google.com/github/roboflow-ai/yolov5-custom-training-tutorial/blob/main/yolov5-custom-training.ipynb)一起使用。[![在 Colab 中打开](https://camo.githubusercontent.com/84f0493939e0c4de4e6dbe113251b4bfb5353e57134ffd9fcab6b8714514d4d1/68747470733a2f2f636f6c61622e72657365617263682e676f6f676c652e636f6d2f6173736574732f636f6c61622d62616467652e737667)](https://colab.research.google.com/github/roboflow-ai/yolov5-custom-training-tutorial/blob/main/yolov5-custom-training.ipynb)

## 在你开始之前

克隆 repo 并在[**Python>=3.7.0**](https://www.python.org/)[环境中安装requirements.txt](https://github.com/ultralytics/yolov5/blob/master/requirements.txt)，包括[**PyTorch>=1.7**](https://pytorch.org/get-started/locally/)。从最新的 YOLOv5[版本自动下载](https://github.com/ultralytics/yolov5/releases)[模型](https://github.com/ultralytics/yolov5/tree/master/models)和[数据集](https://github.com/ultralytics/yolov5/tree/master/data)。

```
git clone https://github.com/ultralytics/yolov5  # clone
cd yolov5
pip install -r requirements.txt  # install
```

![image-20230310195919128](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310195919128.png)

## 训练自定义数据

[![img](https://github.com/ultralytics/assets/raw/main/im/integrations-loop.png)](https://bit.ly/ultralytics_hub)



创建自定义模型来检测您的对象是一个迭代过程，包括收集和组织图像、标记您感兴趣的对象、训练模型、将其部署到野外进行预测，然后使用该部署的模型收集边缘案例示例重复和改进。

### 1.创建数据集

YOLOv5 模型必须在标记数据上进行训练，以便学习该数据中的对象类别。在开始训练之前，有两种创建数据集的选项：

【直接采用第二种方法】

<details open="" style="box-sizing: border-box; display: block; margin-top: 0px; margin-bottom: 16px;"><summary style="box-sizing: border-box; display: list-item; cursor: pointer;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">使用</font></font><a href="https://roboflow.com/?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Roboflow</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">以 YOLO 格式自动标记、准备和托管您的自定义数据</font></font><g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png" style="box-sizing: border-box; display: inline-block; min-width: 1ch; font-family: &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 1em; font-weight: var(--base-text-weight-normal, 400); line-height: 1; vertical-align: -0.075em; font-style: normal !important;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">🚀</font></font></g-emoji><span>&nbsp;</span><b style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">新</font></font></b><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">（点击展开）</font></font></summary><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-11-collect-images" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#11-collect-images" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.1 采集图像</font></font></h3><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">您的模型将通过示例进行学习。</font><font style="box-sizing: border-box; vertical-align: inherit;">对与在野外看到的图像相似的图像进行训练至关重要。</font><font style="box-sizing: border-box; vertical-align: inherit;">理想情况下，您将从最终部署项目的相同配置（相机、角度、照明等）中收集各种图像。</font></font></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">如果这不可能，您可以从</font></font><a href="https://universe.roboflow.com/?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">公共数据集</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">开始训练您的初始模型，然后</font></font><a href="https://blog.roboflow.com/computer-vision-active-learning-tips/?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">在推理过程中从野外采样图像</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">以迭代改进您的数据集和模型。</font></font></p><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-12-create-labels" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#12-create-labels" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.2 创建标签</font></font></h3><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">收集图像后，您将需要对感兴趣的对象进行注释，以便为您的模型创建基本事实以供学习。</font></font></p><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><animated-image data-catalyst="" style="box-sizing: border-box; max-width: 100%; display: inline-block; width: 450px;"><a href="https://app.roboflow.com/?model=yolov5&amp;ref=ultralytics" title="创建一个免费的 Roboflow 帐户" rel="nofollow" data-target="animated-image.originalLink" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><img src="https://camo.githubusercontent.com/25db1cf12486b46356c3bbe82b587176883ae44c880b94a21bf6f1ce7907d4dd/68747470733a2f2f75706c6f6164732d73736c2e776562666c6f772e636f6d2f3566366263363065363635663534353435613165353261352f3631353261323735616434623461633230636432653231615f726f626f666c6f772d616e6e6f746174652e676966" data-canonical-src="https://uploads-ssl.webflow.com/5f6bc60e665f54545a1e52a5/6152a275ad4b4ac20cd2e21a_roboflow-annotate.gif" data-target="animated-image.originalImage" style="box-sizing: content-box; border-style: none; display: inline-block; width: 450px; max-width: 100%; background-color: var(--color-canvas-default);"></a></animated-image></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><a href="https://roboflow.com/annotate?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Roboflow Annotate</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">是一个简单的基于网络的工具，用于与您的团队一起管理和标记您的图像，并以</font></font><a href="https://roboflow.com/formats/yolov5-pytorch-txt?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">YOLOv5 的注释格式</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">导出它们。</font></font></p><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-13-prepare-dataset-for-yolov5" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#13-prepare-dataset-for-yolov5" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.3 为YOLOv5准备数据集</font></font></h3><h4 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-prepare-export-and-host-your-dataset-with-roboflow" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#prepare-export-and-host-your-dataset-with-roboflow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">使用 Roboflow 准备、导出和托管您的数据集</font></font></h4><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">无论您是否</font></font><a href="https://roboflow.com/annotate?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">使用 Roboflow 标记您的图像</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">，您都可以使用它将您的数据集转换为 YOLO 格式，创建一个 YOLOv5 YAML 配置文件，并将其托管以导入您的训练脚本。</font></font></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><a href="https://app.roboflow.com/?model=yolov5&amp;ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">创建一个免费的 Roboflow 帐户</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span>&nbsp;</span>并将您的数据集上传到</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">Public</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">工作区，标记任何未注释的图像，然后以格式生成和导出您的数据集版本</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">YOLOv5 Pytorch</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">。</font></font></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">注意：YOLOv5 在训练期间进行在线增强，因此我们不建议在 Roboflow 中应用任何增强步骤来使用 YOLOv5 进行训练。</font><font style="box-sizing: border-box; vertical-align: inherit;">但我们建议应用以下预处理步骤：</font></font></p><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="450" src="https://camo.githubusercontent.com/3589d5a5dbe29a713cdc33f48c703f3c6f239ee963229b97ba0130865864f6fa/68747470733a2f2f75706c6f6164732d73736c2e776562666c6f772e636f6d2f3566366263363065363635663534353435613165353261352f3631353261323733343737666363663432613066643364365f726f626f666c6f772d70726570726f63657373696e672e706e67" title="推荐的预处理步骤" data-canonical-src="https://uploads-ssl.webflow.com/5f6bc60e665f54545a1e52a5/6152a273477fccf42a0fd3d6_roboflow-preprocessing.png" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p><ul style="box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 16px;"><li style="box-sizing: border-box;"><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Auto-Orient</font></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span>&nbsp;</span>- 从图像中去除 EXIF 方向。</font></font></li><li style="box-sizing: border-box; margin-top: 0.25em;"><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">调整大小（拉伸）</font></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span>&nbsp;</span>- 调整为模型的正方形输入大小（640x640 是 YOLOv5 的默认值）。</font></font></li></ul><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">生成一个版本将为您提供数据集的时间点快照，因此即使您稍后添加更多图像或更改其配置，您也可以随时返回并比较您未来的模型训练运行。</font></font></p><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="450" src="https://camo.githubusercontent.com/9d29e9b67812709641e607c250527412b8dde257e759ecd27864792109ee675f/68747470733a2f2f75706c6f6164732d73736c2e776562666c6f772e636f6d2f3566366263363065363635663534353435613165353261352f3631353261323733336664316461393433363139393334655f726f626f666c6f772d6578706f72742e706e67" title="以 YOLOv5 格式导出" data-canonical-src="https://uploads-ssl.webflow.com/5f6bc60e665f54545a1e52a5/6152a2733fd1da943619934e_roboflow-export.png" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">以格式导出</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">YOLOv5 Pytorch</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">，然后将片段复制到您的训练脚本或笔记本中以下载您的数据集。</font></font></p><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="450" src="https://camo.githubusercontent.com/ed652a62fbab5476de2e8adc57aecf8993f49a1bba06ab096f8876414ca5edd6/68747470733a2f2f75706c6f6164732d73736c2e776562666c6f772e636f6d2f3566366263363065363635663534353435613165353261352f3631353261323733613932653466356362373235393464665f726f626f666c6f772d736e69707065742e706e67" title="Roboflow 数据集下载片段" data-canonical-src="https://uploads-ssl.webflow.com/5f6bc60e665f54545a1e52a5/6152a273a92e4f5cb72594df_roboflow-snippet.png" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">现在继续</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">2. Select a Model</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">。</font></font></p></details>

<details open="" style="box-sizing: border-box; display: block; margin-top: 0px; margin-bottom: 16px;"><summary style="box-sizing: border-box; display: list-item; cursor: pointer;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">或者手动准备您的数据集（点击展开）</font></font></summary><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-11-create-datasetyaml" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#11-create-datasetyaml" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.1 创建dataset.yaml</font></font></h3><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><a href="https://www.kaggle.com/ultralytics/coco128" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">COCO128</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">是一个示例小教程数据集，由</font></font><a href="http://cocodataset.org/#home" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">COCO</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;"><span>&nbsp;</span>train2017 中的前 128 张图像组成。</font><font style="box-sizing: border-box; vertical-align: inherit;">这些相同的 128 张图像用于训练和验证，以验证我们的训练管道是否能够过度拟合。</font></font><a href="https://github.com/ultralytics/yolov5/blob/master/data/coco128.yaml" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">data/coco128.yaml</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">如下所示，是数据集配置文件，它定义了 1) 数据集根目录</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">path</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">和</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">train</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">//图像目录的相对路径（或带有图像路径的 *.txt 文件）和 2<span>&nbsp;</span></font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">val</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">)</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">test</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">类</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">names</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">字典：</font></font></p><div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" style="box-sizing: border-box; position: relative !important; overflow: auto !important; margin-bottom: 16px;"><pre style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; overflow-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; color: var(--color-fg-default); background-color: var(--color-canvas-subtle); border-radius: 6px; word-break: normal;"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> Train/val/test sets as 1) dir: path/to/imgs, 2) file: path/to/imgs.txt, or 3) list: [path/to/imgs1, path/to/imgs2, ..]</span>
<span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">path</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">../datasets/coco128  </span><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> dataset root dir</span>
<span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">train</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">images/train2017  </span><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> train images (relative to 'path') 128 images</span>
<span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">val</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">images/train2017  </span><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> val images (relative to 'path') 128 images</span>
<span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">test</span>:  <span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> test images (optional)</span>
<span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> Classes (80 COCO classes)</span>
<span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">names</span>:
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">0</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">person</span>
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">1</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">bicycle</span>
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">2</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">car</span>
  <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">...</span>
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">77</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">teddy bear</span>
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">78</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">hair drier</span>
  <span class="pl-ent" style="box-sizing: border-box; color: var(--color-prettylights-syntax-entity-tag);">79</span>: <span class="pl-s" style="box-sizing: border-box; color: var(--color-prettylights-syntax-string);">toothbrush</span>
</pre></div><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-12-create-labels-1" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#12-create-labels-1" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.2 创建标签</font></font></h3><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">使用</font></font><a href="https://roboflow.com/annotate?ref=ultralytics" rel="nofollow" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">Roboflow Annotate</font></font></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">等工具标记图像后，将标签导出为</font></font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">YOLO 格式</font></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">，每个</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">*.txt</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">图像一个文件（如果图像中没有对象，则不需要</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">*.txt</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">文件）。</font><font style="box-sizing: border-box; vertical-align: inherit;">文件</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">*.txt</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">规格如下：</font></font></p><ul style="box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 16px;"><li style="box-sizing: border-box;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">每个对象一行</font></font></li><li style="box-sizing: border-box; margin-top: 0.25em;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">每一行都是</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">class x_center y_center width height</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">格式。</font></font></li><li style="box-sizing: border-box; margin-top: 0.25em;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">方框坐标必须采用</font></font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">规范化的 xywh</font></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">格式（从 0 - 1）。</font><font style="box-sizing: border-box; vertical-align: inherit;">如果您的框以像素为单位，请将</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">x_center</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">和</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">width</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">按图像宽度划分，</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">y_center</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">并按</font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">height</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">图像高度划分。</font></font></li><li style="box-sizing: border-box; margin-top: 0.25em;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">类号是零索引的（从 0 开始）。</font></font></li></ul><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="750" src="https://user-images.githubusercontent.com/26833433/91506361-c7965000-e886-11ea-8291-c72b98c25eec.jpg" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">上图对应的标签文件包含2个人（class<span>&nbsp;</span></font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">0</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">）和一条领带（class<span>&nbsp;</span></font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">27</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">）：</font></font></p><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="428" src="https://user-images.githubusercontent.com/26833433/112467037-d2568c00-8d66-11eb-8796-55402ac0d62f.png" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p><h3 style="box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: var(--base-text-weight-semibold, 600); line-height: 1.25;"><a id="user-content-13-organize-directories" class="anchor" aria-hidden="true" href="https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data#13-organize-directories" style="box-sizing: border-box; background-color: transparent; color: var(--color-accent-fg); text-decoration: none; float: left; padding-right: 4px; margin-left: -20px; line-height: 1;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">1.3 组织目录</font></font></h3><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">根据以下示例组织您的训练和验证图像和标签。</font><font style="box-sizing: border-box; vertical-align: inherit;">YOLOv5 假定<span>&nbsp;</span></font></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">/coco128</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">在</font><font style="box-sizing: border-box; vertical-align: inherit;">目录</font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;">旁边的</font></strong></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">/datasets</code><font style="box-sizing: border-box; vertical-align: inherit;"><font style="box-sizing: border-box; vertical-align: inherit;">目录中</font><font style="box-sizing: border-box; vertical-align: inherit;">。</font><font style="box-sizing: border-box; vertical-align: inherit;">YOLOv5 通过将每个图像路径中</font><font style="box-sizing: border-box; vertical-align: inherit;">的最后一个实例替换为 ，</font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;">自动为每个图像定位标签</font></strong><font style="box-sizing: border-box; vertical-align: inherit;">。</font><font style="box-sizing: border-box; vertical-align: inherit;">例如：</font></font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">/yolov5</code><font style="box-sizing: border-box; vertical-align: inherit;"></font><strong style="box-sizing: border-box; font-weight: var(--base-text-weight-semibold, 600);"><font style="box-sizing: border-box; vertical-align: inherit;"></font></strong><font style="box-sizing: border-box; vertical-align: inherit;"></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">/images/</code><font style="box-sizing: border-box; vertical-align: inherit;"></font><code style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; padding: 0.2em 0.4em; margin: 0px; white-space: break-spaces; background-color: var(--color-neutral-muted); border-radius: 6px;">/labels/</code><font style="box-sizing: border-box; vertical-align: inherit;"></font></p><div class="highlight highlight-source-shell notranslate position-relative overflow-auto" style="box-sizing: border-box; position: relative !important; overflow: auto !important; margin-bottom: 16px;"><pre style="box-sizing: border-box; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace; font-size: 13.6px; margin-top: 0px; margin-bottom: 0px; overflow-wrap: normal; padding: 16px; overflow: auto; line-height: 1.45; color: var(--color-fg-default); background-color: var(--color-canvas-subtle); border-radius: 6px; word-break: normal;">../datasets/coco128/images/im0.jpg  <span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> image</span>
../datasets/coco128/labels/im0.txt  <span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);"><span class="pl-c" style="box-sizing: border-box; color: var(--color-prettylights-syntax-comment);">#</span> label</span></pre></div><p align="center" style="box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;"><img width="700" src="https://user-images.githubusercontent.com/26833433/134436012-65111ad1-9541-4853-81a6-f19a3468b75f.png" style="box-sizing: content-box; border-style: none; max-width: 100%; background-color: var(--color-canvas-default);"></p></details>

### 2.选择型号

选择一个预训练模型开始训练。在这里，我们选择[YOLOv5s](https://github.com/ultralytics/yolov5/blob/master/models/yolov5s.yaml)，第二小和最快的可用模型。请参阅我们的 README[表](https://github.com/ultralytics/yolov5#pretrained-checkpoints)，了解所有型号的完整比较。

![YOLOv5 模型](https://github.com/ultralytics/yolov5/releases/download/v1.0/model_comparison.png)

### 3.火车

通过指定数据集、批量大小、图像大小以及预训练`--weights yolov5s.pt`（推荐）或随机初始化`--weights '' --cfg yolov5s.yaml`（不推荐）来在 COCO128 上训练 YOLOv5s 模型。[预训练权重是从最新的 YOLOv5 版本](https://github.com/ultralytics/yolov5/releases)自动下载的。

```
# Train YOLOv5s on COCO128 for 3 epochs
$ python train.py --img 640 --batch 16 --epochs 3 --data coco128.yaml --weights yolov5s.pt
```

💡ProTip：添加`--cache ram`或`--cache disk`加速训练（需要大量 RAM/磁盘资源）。
💡专业提示：始终从本地数据集进行训练。已安装或网络驱动器（如 Google Drive）会非常慢。

所有训练结果都保存在`runs/train/`递增的运行目录中，即等`runs/train/exp2`。`runs/train/exp3`有关更多详细信息，请参阅我们的教程笔记本的训练部分。[![在 Colab 中打开](https://camo.githubusercontent.com/84f0493939e0c4de4e6dbe113251b4bfb5353e57134ffd9fcab6b8714514d4d1/68747470733a2f2f636f6c61622e72657365617263682e676f6f676c652e636f6d2f6173736574732f636f6c61622d62616467652e737667)](https://colab.research.google.com/github/ultralytics/yolov5/blob/master/tutorial.ipynb) [![在 Kaggle 中打开](https://camo.githubusercontent.com/a08ca511178e691ace596a95d334f73cf4ce06e83a5c4a5169b8bb68cac27bef/68747470733a2f2f6b6167676c652e636f6d2f7374617469632f696d616765732f6f70656e2d696e2d6b6167676c652e737667)](https://www.kaggle.com/ultralytics/yolov5)

![image-20230310200043514](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310200043514.png)

![image-20230310201714795](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310201714795.png)

![image-20230310201811822](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310201811822.png)

可在web实时查看

![image-20230310201845788](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310201845788.png)

![image-20230310201947483](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310201947483.png)





### 4.可视化

#### 彗星记录和可视化🌟新的

[Comet](https://bit.ly/yolov5-readme-comet)现在与 YOLOv5 完全集成。实时跟踪和可视化模型指标，保存您的超参数、数据集和模型检查点，并使用[Comet Custom Panels](https://bit.ly/yolov5-colab-comet-panels)可视化您的模型预测！Comet 确保您永远不会忘记您的工作，并且可以轻松地在各种规模的团队之间共享结果和协作！

入门很简单：

```
pip install comet_ml  # 1. install
export COMET_API_KEY=<Your API Key>  # 2. paste API key
python train.py --img 640 --epochs 3 --data coco128.yaml --weights yolov5s.pt  # 3. train
```

![image-20230310202206054](C:/Users/hp/AppData/Roaming/Typora/typora-user-images/image-20230310202206054.png)



要了解有关此集成的所有受支持 Comet 功能的更多信息，请查看[Comet 教程](https://github.com/ultralytics/yolov5/tree/master/utils/loggers/comet)。如果您想了解有关 Comet 的更多信息，请转到我们的[文档](https://bit.ly/yolov5-colab-comet-docs)。从试用 Comet Colab Notebook 开始： [![在 Colab 中打开](https://camo.githubusercontent.com/84f0493939e0c4de4e6dbe113251b4bfb5353e57134ffd9fcab6b8714514d4d1/68747470733a2f2f636f6c61622e72657365617263682e676f6f676c652e636f6d2f6173736574732f636f6c61622d62616467652e737667)](https://colab.research.google.com/drive/1RG0WOQyxlDlo5Km8GogJpIEJlg_5lyYO?usp=sharing)

![yolo-ui](https://user-images.githubusercontent.com/26833433/202851203-164e94e1-2238-46dd-91f8-de020e9d6b41.png)

#### ClearML 日志记录和自动化🌟新的

[ClearML](https://cutt.ly/yolov5-notebook-clearml)完全集成到 YOLOv5 中以跟踪您的实验、管理数据集版本甚至远程执行训练运行。要启用 ClearML：

- `pip install clearml`
- 运行`clearml-init`以连接到 ClearML 服务器（**[在此处](https://github.com/allegroai/clearml-server)****部署您自己的开源服务器**，或[在此处](https://cutt.ly/yolov5-notebook-clearml)使用我们的免费托管服务器）

您将从实验管理器那里获得所有预期的功能：实时更新、模型上传、实验比较等，但 ClearML 还可以跟踪未提交的更改和已安装的包等。多亏了 ClearML 任务（也就是我们所说的实验）也可以在不同的机器上重现！只需额外一行，我们就可以在队列上安排 YOLOv5 训练任务，由任意数量的 ClearML 代理（工作者）执行。

您可以使用 ClearML Data 对数据集进行版本化，然后仅使用其唯一 ID 将其传递给 YOLOv5。这将帮助您跟踪数据，而不会增加额外的麻烦。探索[ClearML 教程](https://github.com/ultralytics/yolov5/tree/master/utils/loggers/clearml)以获取详细信息！

[![ClearML 实验管理 UI](https://github.com/thepycoder/clearml_screenshots/raw/main/scalars.jpg)](https://cutt.ly/yolov5-notebook-clearml)

#### 本地记录

训练结果使用[Tensorboard](https://www.tensorflow.org/tensorboard)和[CSV](https://github.com/ultralytics/yolov5/pull/4148)记录器自动记录到`runs/train`，并为每个新训练创建一个新的实验目录`runs/train/exp2`，如`runs/train/exp3`，等等。

此目录包含训练和验证统计数据、马赛克、标签、预测和增强马赛克，以及指标和图表，包括精确召回 (PR) 曲线和混淆矩阵。

![本地记录结果](https://github.com/ultralytics/yolov5/releases/download/v1.0/image-local_logging.jpg)

结果文件`results.csv`在每个时期后更新，然后`results.png`在训练完成后绘制为（如下）。您还可以`results.csv`手动绘制任何文件：

```
from utils.plots import plot_results
plot_results('path/to/results.csv')  # plot 'results.csv' as 'results.png'
```

![结果.png](https://github.com/ultralytics/yolov5/releases/download/v1.0/results.png)

## 下一步

训练好模型后，您可以使用最佳检查点`best.pt`来：

- 对新图像和视频运行[CLI](https://github.com/ultralytics/yolov5#quick-start-examples)或[Python](https://github.com/ultralytics/yolov5/issues/36)推理
- [验证](https://github.com/ultralytics/yolov5/blob/master/val.py)训练、验证和测试拆分的准确性
- [导出](https://github.com/ultralytics/yolov5/issues/251)为 TensorFlow、Keras、ONNX、TFlite、TF.js、CoreML 和 TensorRT 格式
- [发展](https://github.com/ultralytics/yolov5/issues/607)超参数以提高性能
- 通过对真实世界的图像进行采样并将它们添加到数据集中来[改进您的模型](https://docs.roboflow.com/adding-data/upload-api?ref=ultralytics)

## 环境

YOLOv5 可以在以下任何经过验证的最新环境中运行（预装了所有依赖项，包括[CUDA](https://developer.nvidia.com/cuda) / [CUDNN](https://developer.nvidia.com/cudnn)、[Python](https://www.python.org/)和[PyTorch](https://pytorch.org/)）：

- **配备免费 GPU 的笔记本电脑**：[![渐变运行](https://camo.githubusercontent.com/c9931a1689c37ab786edd3e1e5f59b9a6f7d097628c4689ce2432563ef884524/68747470733a2f2f6173736574732e706170657273706163652e696f2f696d672f6772616469656e742d62616467652e737667)](https://bit.ly/yolov5-paperspace-notebook) [![在 Colab 中打开](https://camo.githubusercontent.com/84f0493939e0c4de4e6dbe113251b4bfb5353e57134ffd9fcab6b8714514d4d1/68747470733a2f2f636f6c61622e72657365617263682e676f6f676c652e636f6d2f6173736574732f636f6c61622d62616467652e737667)](https://colab.research.google.com/github/ultralytics/yolov5/blob/master/tutorial.ipynb) [![在 Kaggle 中打开](https://camo.githubusercontent.com/a08ca511178e691ace596a95d334f73cf4ce06e83a5c4a5169b8bb68cac27bef/68747470733a2f2f6b6167676c652e636f6d2f7374617469632f696d616765732f6f70656e2d696e2d6b6167676c652e737667)](https://www.kaggle.com/ultralytics/yolov5)
- **谷歌云**深度学习虚拟机。请参阅[GCP 快速入门指南](https://github.com/ultralytics/yolov5/wiki/GCP-Quickstart)
- **亚马逊**深度学习 AMI。请参阅[AWS 快速入门指南](https://github.com/ultralytics/yolov5/wiki/AWS-Quickstart)
- **泊坞窗图像**。请参阅[Docker 快速入门指南](https://github.com/ultralytics/yolov5/wiki/Docker-Quickstart) [![码头工人拉动](https://camo.githubusercontent.com/280faedaf431e4c0c24fdb30ec00a66d627404e5c4c498210d3f014dd58c2c7e/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f756c7472616c79746963732f796f6c6f76353f6c6f676f3d646f636b6572)](https://hub.docker.com/r/ultralytics/yolov5)

